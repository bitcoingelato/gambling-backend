<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bitcoin Gelato Casino</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- LOGIN/SIGNUP -->
  <div class="container" id="loginPage">
    <h2>Bitcoin Gelato Casino</h2>
    <div id="debug-panel"></div>
    
    <div id="loginBox">
      <input class="input" id="loginUser" placeholder="Username">
      <input class="input" id="loginPass" type="password" placeholder="Password">
      <div class="captcha-wrap">
        <div class="h-captcha" data-sitekey="b1e64024-155e-43da-a5e6-9b56729c337e"></div>
      </div>
      <button class="game-btn" id="loginBtn">Login</button>
      <p style="text-align:center;">No account? <a href="#" id="showSignup" style="color:#ffc107;">Sign Up</a></p>
      <div class="err" id="loginErr"></div>
    </div>
    <div id="signupBox" class="hidden">
      <input class="input" id="signupUser" placeholder="Username">
      <input class="input" id="signupEmail" type="email" placeholder="Email">
      <input class="input" id="signupPass" type="password" placeholder="Password">
      <div class="captcha-wrap">
        <div class="h-captcha" data-sitekey="b1e64024-155e-43da-a5e6-9b56729c337e"></div>
      </div>
      <button class="game-btn" id="signupBtn">Sign Up (Fun Mode)</button>
      <p style="text-align:center;">Already have an account? <a href="#" id="showLogin" style="color:#ffc107;">Login</a></p>
      <div class="err" id="signupErr"></div>
    </div>
  </div>

  <!-- MAIN MENU -->
  <div class="container hidden" id="mainPage">
    <div id="userBox">
      Welcome, <b id="userName"></b>!
      <button id="logoutBtn">Logout</button>
    </div>
    <div id="balanceBox">
      Fun Mode Balance: <span id="balance">0.00</span>
    </div>
    <button class="game-btn" id="btnCrash">Crash</button>
    <button class="game-btn" id="btnCoinflip">Coinflip</button>
    <button class="game-btn" id="btnRoulette">Roulette</button>
    <button class="game-btn" id="btn3cp">3 Card Poker</button>
    <button class="game-btn" id="btnSettings" style="background: #444; color: #ffc107;">Account Settings</button>
  </div>

  <!-- CRASH -->
  <div class="container hidden" id="crashSection">
    <button id="backFromCrash" style="float:right;margin-top:-10px;background:#222;color:#ffc107;border:none;font-size:1em;">&larr; Back</button>
    <h2>Crash (Fun Mode)</h2>
    <div class="section">
      <div style="text-align: center; font-size: 2.5rem; font-weight: bold; color: #ffc107; margin-bottom: 10px;" id="crashMultiplier">1.00x</div>
      <div class="crash-graph" id="crashGraph">
        <div class="crash-line" id="crashLine"></div>
        <div class="crash-rocket" id="crashRocket"></div>
        <div class="crash-explosion" id="crashExplosion"></div>
      </div>
      <div id="crashTimer" style="text-align:center; color:#ffc107; font-size:1.2em; margin: 10px 0;">Next round in <span id="countdown">9</span>s</div>
      <div class="bet-row">
        <input id="crashBetAmount" type="number" step="0.01" min="0.01" value="1.00">
        <button id="crashBetBtn">Place Bet</button>
        <button id="crashCancelBtn" disabled>Cancel Bet</button>
        <button id="crashCashoutBtn" disabled>Cash Out</button>
      </div>
      <div id="crashMsg" class="err"></div>
      
      <div style="margin-top: 15px;">
        <h4 style="margin-bottom: 5px;">Recent Crashes:</h4>
        <div id="recentCrashesContainer"></div>
      </div>
    </div>
  </div>

  <!-- COINFLIP -->
  <div class="container hidden" id="coinflipSection">
    <button id="backFromCoinflip" style="float:right;margin-top:-10px;background:#222;color:#ffc107;border:none;font-size:1em;">&larr; Back</button>
    <h2>Coinflip</h2>
    <div class="section">
      <div class="bet-row flex">
        <input id="coinflipBetAmount" type="number" step="0.01" min="0.01" value="1.00">
        <button class="coin-btn" id="btnHeads">H</button>
        <button class="coin-btn" id="btnTails">T</button>
        <button id="coinflipBetBtn">Flip</button>
      </div>
      <div id="coinflipMsg" class="err"></div>
      <div id="coinflipResult">Waiting for flip...</div>
    </div>
  </div>

  <!-- ROULETTE -->
  <div class="container hidden" id="rouletteSection">
    <button id="backFromRoulette" style="float:right;margin-top:-10px;background:#222;color:#ffc107;border:none;font-size:1em;">&larr; Back</button>
    <h2>Roulette</h2>
    <div class="section">
      <div class="bet-row flex">
        <input id="rouletteBetAmount" type="number" step="0.01" min="0.01" value="1.00">
        <button class="roul-btn red" id="btnRed">Red</button>
        <button class="roul-btn black" id="btnBlack">Black</button>
        <button class="roul-btn green" id="btnGreen">Green</button>
      </div>
      <div class="roulette-wrapper">
        <div class="roulette-pointer"></div>
        <div class="roulette-wheel" id="rouletteWheel"></div>
      </div>
      <div id="rouletteMsg" class="err"></div>
      <div id="rouletteResult">Waiting for spin...</div>
    </div>
  </div>

  <!-- 3 CARD POKER -->
  <div class="container hidden" id="threecpSection">
    <button id="backFrom3CP" style="float:right;margin-top:-10px;background:#222;color:#ffc107;border:none;font-size:1em;">&larr; Back</button>
    <h2>3 Card Poker</h2>
    <div class="section">
      <div class="bet-row">
        <input id="threecpBetAmount" type="number" step="0.01" min="0.01" value="1.00">
        <button id="threecpAnteBtn">Ante</button>
      </div>
      <div id="threecpMsg" class="err"></div>
      <div id="threecpPlayer"></div>
      <div id="threecpDecisionBtns" class="hidden">
        <button id="threecpPlayBtn">Play (Up Ante)</button>
        <button id="threecpFoldBtn">Fold</button>
      </div>
      <div id="threecpDealer"></div>
      <div id="threecpResult">Waiting for bet...</div>
    </div>
  </div>

  <!-- ACCOUNT SETTINGS -->
  <div class="container hidden" id="settingsSection">
    <button id="backFromSettings" style="float:right;margin-top:-10px;background:#222;color:#ffc107;border:none;font-size:1em;">&larr; Back</button>
    <h2>Account Settings</h2>
    <div id="settingsMsg" class="err"></div>
    <form id="formChangePassword">
      <label>Change Password</label>
      <input id="currentPassword" type="password" placeholder="Current Password" required>
      <input id="newPassword" type="password" placeholder="New Password" required>
      <input id="confirmNewPassword" type="password" placeholder="Confirm New Password" required>
      <button type="submit" class="game-btn settings-btn">Change Password</button>
    </form>
    <form id="formChangeEmail">
      <label>Change Email</label>
      <input id="currentPassword2" type="password" placeholder="Current Password" required>
      <input id="newEmail" type="email" placeholder="New Email" required>
      <button type="submit" class="game-btn settings-btn">Change Email</button>
    </form>
  </div>
  
  <!-- Verify Fairness Modal -->
  <div id="verifyModal" class="verify-modal hidden">
    <div class="verify-modal-content">
      <h3>Verify Crash Fairness</h3>
      <div>
        <p>Round: <span id="verifyRound"></span></p>
        <p>Server Seed: <span id="verifyServerSeed"></span></p>
        <p>Hash: <span id="verifyHash"></span></p>
        <p>Crash Point: <span id="verifyCrashPoint"></span></p>
      </div>
      <button id="closeVerifyBtn">Close</button>
    </div>
  </div>

  <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
  <script src="js/frontend.js"></script>
</body>
</html>
